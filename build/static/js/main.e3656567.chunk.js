(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{204:function(e,t,a){e.exports=a.p+"static/media/sprouts_logo.d764dd2c.png"},209:function(e,t,a){e.exports=a(490)},399:function(e,t,a){},401:function(e,t,a){},490:function(e,t,a){"use strict";a.r(t);var n=a(4),s=a.n(n),o={aws_app_analytics:"enable",aws_cloud_logic:"enable",aws_cloud_logic_custom:[{id:"7d3jmnsmq2",name:"Meal_OptionCRUD",description:"",endpoint:"https://7d3jmnsmq2.execute-api.us-west-2.amazonaws.com/Development",region:"us-west-2",paths:["/Meal_Option","/Meal_Option/123"]},{id:"wtzn0btr48",name:"Volunteer_LogsCRUD",description:"",endpoint:"https://wtzn0btr48.execute-api.us-west-2.amazonaws.com/Development",region:"us-west-2",paths:["/Volunteer_Logs","/Volunteer_Logs/123"]}],aws_cognito_identity_pool_id:"us-west-2:1590aa65-0f0a-4437-a09c-11646d3b9092",aws_cognito_region:"us-west-2",aws_content_delivery:"enable",aws_content_delivery_bucket:"sprouts-hosting-mobilehub-1151464687",aws_content_delivery_bucket_region:"us-west-2",aws_content_delivery_cloudfront:"enable",aws_content_delivery_cloudfront_domain:"d3s1kw1wsqasmd.cloudfront.net",aws_dynamodb:"enable",aws_dynamodb_all_tables_region:"us-west-2",aws_dynamodb_table_schemas:[{tableName:"sprouts-mobilehub-1151464687-Volunteer_Logs",attributes:[{name:"name",type:"S"},{name:"date",type:"S"},{name:"cost",type:"N"},{name:"endTime",type:"S"},{name:"location",type:"S"},{name:"meal",type:"S"},{name:"startTime",type:"S"}],indexes:[],region:"us-west-2",hashKey:"name",rangeKey:"date"},{tableName:"sprouts-mobilehub-1151464687-Meal_Option",attributes:[{name:"Name",type:"S"},{name:"Price",type:"N"}],indexes:[],region:"us-west-2",hashKey:"Name"}],aws_mobile_analytics_app_id:"ba11ebbd960b463db996534cab147134",aws_mobile_analytics_app_region:"us-east-1",aws_project_id:"607fef8f-bc24-44cd-8627-9aa18906d0e6",aws_project_name:"Sprouts",aws_project_region:"us-west-2",aws_resource_bucket_name:"sprouts-deployments-mobilehub-1151464687",aws_resource_name_prefix:"sprouts-mobilehub-1151464687",aws_sign_in_enabled:"enable",aws_user_pools:"enable",aws_user_pools_id:"us-west-2_TLPqmyiUH",aws_user_pools_web_client_id:"70264dehkp0gp5pjmniq8b53ct"},r=a(0),l=a.n(r),i=a(203),c=a.n(i),u=(a(399),a(13)),m=a(14),d=a(16),h=a(15),p=a(17),b=(a(401),a(32)),f=a(3),v=a(204),g=a.n(v),w=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e)))._validAuthStates=["signIn"],a.state={email:"",password:""},a.signIn=a.signIn.bind(Object(f.a)(Object(f.a)(a))),a.handleEmail=a.handleEmail.bind(Object(f.a)(Object(f.a)(a))),a.handlePassword=a.handlePassword.bind(Object(f.a)(Object(f.a)(a))),a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"signIn",value:function(){var e=this,t=this.state,a=t.email,s=t.password;n.Auth.signIn(a,s).then(function(t){"NEW_PASSWORD_REQUIRED"===t.challengeName?(console.log("require new password",t.challengeParam),e.changeState("requireNewPassword",t)):(e.checkContact(t),window.location.reload())}).catch(function(t){"UserNotConfirmedException"===t.code?(console.log("the user is not confirmed"),alert("Please check your email and verify your account before signing in.")):e.error(t)})}},{key:"handleEmail",value:function(e){this.setState({email:e.target.value})}},{key:"handlePassword",value:function(e){this.setState({password:e.target.value})}},{key:"showComponent",value:function(){var e=this;return l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row justify-content-center"},l.a.createElement("div",{className:"col-12 col-sm-10 col-md-8 col-lg-6 col-xl-5 text-center my-3"},l.a.createElement("div",{className:"mb-4"},l.a.createElement("img",{src:g.a,alt:"logo",width:200,height:143/1.5}),l.a.createElement("h5",{className:"mt-2"},"Sign in with your Sprouts Account")),l.a.createElement("form",null,l.a.createElement("div",{className:"form-group"},l.a.createElement("h6",{className:"text-left mb-0"},"Username or Email"),l.a.createElement("input",{className:"form-control rounded-0 border-left-0 border-right-0 border-top-0",type:"email",id:"username",key:"username",name:"username",onChange:this.handleEmail})),l.a.createElement("div",{className:"form-group"},l.a.createElement("h6",{className:"text-left mb-0"},"Password"),l.a.createElement("input",{className:"form-control rounded-0 border-left-0 border-right-0 border-top-0",type:"password",id:"password",key:"password",name:"password",onChange:this.handlePassword})),l.a.createElement("div",{className:"py-1"},l.a.createElement("button",{type:"button",className:"btn btn-block rounded-0 btn-primary",onClick:this.signIn,value:"Sign In"},n.I18n.get("Sign In")))),l.a.createElement("div",{className:"py-1"},l.a.createElement("button",{type:"button",className:"btn btn-block rounded-0 btn-primary text-white",onClick:function(){return e.changeState("signUp")}},n.I18n.get("Create Account"))),l.a.createElement("div",{className:"py-1"},l.a.createElement("button",{type:"button",className:"btn btn-link",onClick:function(){return e.changeState("forgotPassword")}},n.I18n.get("Forgot password?"))),l.a.createElement("div",{className:"mt-5"},l.a.createElement("p",{className:"text-muted small"},"\xa9 2018 Sprouts UBC. Developed by ",l.a.createElement("a",{className:"text-muted",href:"http://codethechange.ca"},"Code the Change Foundation"),".")))))}}]),t}(b.SignIn),y=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e)))._validAuthStates=["signUp"],a.state={username:"",password:"",checkPassword:"",email:""},a.signUp=a.signUp.bind(Object(f.a)(Object(f.a)(a))),a.handleCheckPassword=a.handleCheckPassword.bind(Object(f.a)(Object(f.a)(a))),a.handleUsername=a.handleUsername.bind(Object(f.a)(Object(f.a)(a))),a.handlePassword=a.handlePassword.bind(Object(f.a)(Object(f.a)(a))),a.handleEmail=a.handleEmail.bind(Object(f.a)(Object(f.a)(a))),a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"signUp",value:function(){var e=this,t=this.state,a=t.username,s=t.password,o=t.email;""===this.state.email?alert("Please enter a valid email address."):""===this.state.username?alert("Please enter a valid UserName."):this.state.password!==this.state.checkPassword?alert("Passwords do not match."):this.state.password.length<8?alert("Password must contain at least one uppercase letter, lowercase letter, number and must be at least 8 characters long"):this.state.password===this.state.password.toLowerCase()||this.state.password===this.state.password.toUpperCase()?alert("Password must contain at least one uppercase letter, lowercase letter, and number."):/\d/.test(this.state.password)?n.Auth.signUp({username:a,password:s,attributes:{email:o}}).then(function(t){alert("Please check your email for your account verification link."),e.changeState("signIn")}).catch(function(e){e.message?alert(e.message):alert(e)}):alert("Password must contain at least one number.")}},{key:"handleEmail",value:function(e){this.setState({email:e.target.value})}},{key:"handleUsername",value:function(e){this.setState({username:e.target.value})}},{key:"handlePassword",value:function(e){this.setState({password:e.target.value})}},{key:"handleCheckPassword",value:function(e){this.setState({checkPassword:e.target.value})}},{key:"showComponent",value:function(){var e=this;return l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row justify-content-center"},l.a.createElement("div",{className:"col-12 col-sm-10 col-md-8 col-lg-6 col-xl-5 text-center my-3"},l.a.createElement("h1",{className:"pb-2"},"Create A New Account"),l.a.createElement("form",null,l.a.createElement("div",{className:"form-group"},l.a.createElement("h6",{className:"text-left mb-0"},"Username"),l.a.createElement("p",{className:"text-left text-muted small mb-0"},"Please use your name without spaces."),l.a.createElement("input",{className:"form-control rounded-0 border-left-0 border-right-0 border-top-0",type:"text",id:"username",key:"username",name:"username",placeholder:"Ex. JohnDoe",onChange:this.handleUsername,value:this.state.username})),l.a.createElement("div",{className:"form-group"},l.a.createElement("h6",{className:"text-left mb-0"},"Email"),l.a.createElement("input",{className:"form-control rounded-0 border-left-0 border-right-0 border-top-0",type:"email",id:"email",key:"email",name:"email",placeholder:"Ex. John@example.com",onChange:this.handleEmail,value:this.state.email})),l.a.createElement("div",{className:"form-group"},l.a.createElement("h6",{className:"text-left mb-0"},"Password"),l.a.createElement("p",{className:"text-left text-muted small mb-0"},"Use 8 or more characters with a mix of lowercase and uppercase letters and numbers."),l.a.createElement("input",{className:"form-control rounded-0 border-left-0 border-right-0 border-top-0",type:"password",id:"password",key:"password",name:"password",placeholder:"",onChange:this.handlePassword,value:this.state.password})),l.a.createElement("div",{className:"form-group"},l.a.createElement("h6",{className:"text-left mb-0"},"Verify Password"),l.a.createElement("input",{className:"form-control rounded-0 border-left-0 border-right-0 border-top-0",type:"password",id:"checkPassword",key:"checkPassword",name:"checkPassword",placeholder:"",onChange:this.handleCheckPassword,value:this.state.checkPassword})),l.a.createElement("div",{className:"py-1"},l.a.createElement("button",{type:"button",className:"btn btn-block rounded-0 btn-primary",onClick:this.signUp},n.I18n.get("Create Account")))),l.a.createElement("div",{className:"py-1"},l.a.createElement("button",{type:"button",className:"btn btn-link",onClick:function(){return e.changeState("signIn")}},"Back to Sign In")))))}}]),t}(b.SignUp),E=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(m.a)(t,[{key:"sendView",value:function(){return l.a.createElement("div",null,l.a.createElement("div",{className:"form-group"},l.a.createElement("h6",{className:"text-left mb-0"},"Email"),l.a.createElement("input",{className:"form-control rounded-0 border-left-0 border-right-0 border-top-0",type:"text",id:"username",key:"username",name:"username",placeholder:"Ex. John@example.com",onChange:this.handleInputChange})),l.a.createElement("div",{className:"py-1"},l.a.createElement("button",{type:"button",onClick:this.send,className:"btn btn-block rounded-0 btn-primary"},n.I18n.get("Send Code"))))}},{key:"submitView",value:function(){return l.a.createElement("div",null,l.a.createElement("div",{className:"form-group"},l.a.createElement("h6",{className:"text-left mb-0"},"Code"),l.a.createElement("input",{className:"form-control rounded-0 border-left-0 border-right-0 border-top-0",type:"text",id:"code",key:"code",name:"code",placeholder:"Ex. 123456",onChange:this.handleInputChange})),l.a.createElement("div",{className:"form-group"},l.a.createElement("h6",{className:"text-left mb-0"},"Password"),l.a.createElement("p",{className:"text-left text-muted small mb-0"},"Use 8 or more characters with a mix of lowercase and uppercase letters and numbers."),l.a.createElement("input",{className:"form-control rounded-0 border-left-0 border-right-0 border-top-0",type:"password",id:"password",key:"password",name:"password",placeholder:"",onChange:this.handleInputChange})),l.a.createElement("div",{className:"py-1"},l.a.createElement("button",{type:"button",onClick:this.submit,className:"btn btn-block rounded-0 btn-primary"},n.I18n.get("Submit"))))}},{key:"showComponent",value:function(){var e=this,t=this.props.hide;return t&&t.includes(b.ForgotPassword)?null:l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row justify-content-center"},l.a.createElement("div",{className:"col-12 col-sm-10 col-md-8 col-lg-6 col-xl-5 text-center my-3"},l.a.createElement("h1",{className:"pb-2"},n.I18n.get("Forgot Password")),l.a.createElement("form",null,l.a.createElement("div",{className:"form-group"},this.state.delivery?this.submitView():this.sendView())),l.a.createElement("div",{className:"py-1"},l.a.createElement("button",{type:"button",className:"btn btn-link",onClick:function(){return e.changeState("signIn")}},"Back to Sign In")))))}}]),t}(b.ForgotPassword),k=a(493),O=a(492),N=function(e){return l.a.createElement("div",{className:"bg-light py-3 shadow-sm sticky-top"},l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row justify-content-center"},l.a.createElement("div",{className:"col-12"},j(e.link,e.title)))))},j=function(e,t){var a=e?l.a.createElement("button",{onClick:e,className:"btn btn-lg btn-link position-absolute d-flex align-self-center p-0 pr-3 text-body no-underline"},"\u2190"):void 0;return l.a.createElement("h3",{className:"text-center mb-0"},a,t)},S=function(e){return l.a.createElement("button",{type:"button",className:"btn ".concat(e.color),onClick:e.onClick,disabled:e.disabled},e.title)};S.defaultProps={disabled:!1};var C=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(m.a)(t,[{key:"signOut",value:function(){n.Auth.signOut().then(function(){return window.location.reload()}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement(N,{title:"Admin Options"}),l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row justify-content-center"},l.a.createElement("div",{className:"col-12 my-3"},l.a.createElement(S,{title:"Log Hours",color:"btn-primary rounded-0 btn-block",onClick:function(){return e.props.history.push("/logHours")}}),l.a.createElement(S,{title:"View Logs",color:"btn-primary rounded-0 btn-block",onClick:function(){return e.props.history.push("/viewLogs")}}),l.a.createElement(S,{title:"Modify Meal Options",color:"btn-primary rounded-0 btn-block",onClick:function(){return e.props.history.push("/modifyMeals")}}),l.a.createElement(S,{title:n.I18n.get("Sign Out"),color:"btn-danger rounded-0 btn-block",onClick:this.signOut})))))}}]),t}(l.a.Component),D=a(47),_=function(e){return l.a.createElement("table",{className:"table table-bordered table-hover"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},e.col1),l.a.createElement("th",{scope:"col"},e.col2),e.col3&&l.a.createElement("th",{scope:"col"},e.col3))),l.a.createElement("tbody",null,T(e.data,e.select,e.col3)))},T=function(e,t,a){for(var n=new Array(Object.keys(e).length),s=function(s){n.push(l.a.createElement("tr",{key:s,onClick:function(){t&&t(s)}},l.a.createElement("td",null,e[s].col1),l.a.createElement("td",null,e[s].col2),a&&l.a.createElement("td",null,e[s].col3)))},o=0;o<e.length;o++)s(o);return n},M=function(e){return l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,e.title),l.a.createElement("input",{type:e.type,value:e.value,className:"form-control rounded-0 border-left-0 border-right-0 border-top-0",placeholder:e.placeholder,"aria-label":e.placeholder,onChange:e.update,disabled:e.disabled,required:!e.disabled&&"required"}))};M.defaultProps={type:"text"};var P=function(e){var t=e.renderTitle?l.a.createElement("label",null,e.title):void 0;return l.a.createElement("div",{className:"form-group"},t,l.a.createElement("select",{value:e.value,className:"custom-select",onChange:e.update,disabled:e.disabled},l.a.createElement("option",{key:"0",value:e.default},e.default),I(e.dropdown)))},I=function(e){for(var t=new Array(e.length),a=0;a<e.length;a++)t.push(l.a.createElement("option",{key:a,value:e[a]},e[a]));return t};P.defaultProps={renderTitle:!0,default:"Choose..."};var x=a(483),U=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).apiData=[],a.filteredData=[],a.state={tableData:[],fromDate:a.setDates("from"),toDate:a.setDates("to"),users:[],selectedUser:"All Users"},a.getTableData(),a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"setDates",value:function(e){var t=new Date,a=t.getMonth()+1,n=t.getDate(),s=a<10?"0":"";return"from"===e?"".concat(t.getFullYear(),"-").concat(s).concat(a,"-01"):"to"===e?"".concat(t.getFullYear(),"-").concat(s).concat(a,"-").concat(n<10?"0":"").concat(n):void 0}},{key:"getTableData",value:function(){var e=this;n.API.get("Volunteer_LogsCRUD","/Volunteer_Logs").then(function(t){e.apiData=t.data.reverse(),e.parseTableData()}).catch(function(e){console.log("Error ".concat(e))})}},{key:"parseTableData",value:function(){var e=this,t=[],a=[];this.apiData.forEach(function(n){var s,o,r=new Date(n.date).toISOString();try{s=new Date(e.state.fromDate).toISOString(),o=new Date(e.state.toDate).toISOString()}catch(l){console.log("Invalid date format")}r>=s&&r<=o&&("All Users"===e.state.selectedUser?(t.push({col1:n.name,col2:n.date,col3:n.location}),a.push(n)):e.state.selectedUser===n.name&&(t.push({col1:n.name,col2:n.date,col3:n.location}),a.push(n)))}),this.filteredData=a,this.setState({tableData:t}),this.getUsers()}},{key:"getUsers",value:function(){var e=new Set,t=new Date(this.state.fromDate).toISOString(),a=new Date(this.state.toDate).toISOString();this.apiData.forEach(function(n){var s=new Date(n.date).toISOString();s>=t&&s<=a&&e.add(n.name)}),this.setState({users:Object(D.a)(e)})}},{key:"handleFilter",value:function(e){var t=this;this.setState({selectedUser:e.target.value},function(){t.parseTableData()})}},{key:"exportCSV",value:function(e){var t="data:text/csv;charset=utf-8,".concat(e.join("\r\n"));window.open(encodeURI(t))}},{key:"printShifts",value:function(e){for(var t={},a={},n={},s=["User, Date, Location, Start Time, End Time, Meal, Cost ($)"],o=0;o<this.state.users.length;o++)t[this.state.users[o]]=0,a[this.state.users[o]]=0;return e.forEach(function(e){var o="",r=new x(e.endTime,"HH:mm"),l=new x(e.startTime,"HH:mm"),i=r.diff(l,"minutes"),c=new x(t[e.name],"minutes");t[e.name]=c.add(i,"minutes"),a[e.name]+=Number(e.cost);for(var u=0;u<e.meal.length;u++){var m=e.meal[u][0];n[m]?n[m]++:n[m]=1,o+=m+"; "}var d="".concat(e.name,",").concat(e.date,",").concat(e.location,",").concat(e.startTime,",").concat(e.endTime,",").concat(o,",").concat(e.cost);s.push(d)}),s=this.printUserStats(s,t,a),s=this.printMealCount(s,n)}},{key:"printUserStats",value:function(e,t,a){for(var n=Object(D.a)(e).concat(["\r\n","User, Time (HH:mm), Total Cost ($)"]),s=0;s<this.state.users.length;s++){var o=this.state.users[s],r=new x(t[o],"mm");t[o]=r.format("HH:mm"),"00:00"!==t[o]&&n.push("".concat(o,",").concat(t[o],",").concat(a[o]))}return n}},{key:"printMealCount",value:function(e,t){for(var a=Object(D.a)(e).concat(["\r\n","Meal Option, Quantity"]),n=Object.keys(t),s=0;s<n.length;s++)a.push("".concat(n[s],",").concat(t[n[s]]));return a}},{key:"selectRow",value:function(e){var t=this.filteredData[e];this.props.onSelectRow(t),this.props.history.push("/shiftDetails")}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement(N,{title:"View Logs",link:function(){return e.props.history.push("/")}}),l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row justify-content-center"},l.a.createElement("div",{className:"col-12 my-3"},l.a.createElement(M,{value:this.state.fromDate,title:"From date",placeholder:"From date",type:"date",update:function(t){e.setState({fromDate:t.target.value},function(){e.parseTableData()})}}),l.a.createElement(M,{value:this.state.toDate,title:"To date",placeholder:"To date",type:"date",update:function(t){e.setState({toDate:t.target.value},function(){e.parseTableData()})}}),l.a.createElement(P,{value:this.state.selectedUser,dropdown:this.state.users,title:"Volunteer",default:"All Users",placeholder:"Volunteer",update:function(t){return e.handleFilter(t)}}),l.a.createElement("div",{className:"pb-5 mb-4"},l.a.createElement(_,{col1:"User",col2:"Date",col3:"Location",data:this.state.tableData,select:this.selectRow.bind(this)})),l.a.createElement("div",{className:"container bg-white py-1 fixed-bottom"},l.a.createElement(S,{title:"Export Data",color:"btn-danger rounded-0 btn-block",onClick:function(){return e.exportCSV(e.printShifts(Object(D.a)(e.filteredData)))}}))))))}}]),t}(l.a.Component),A=a(54),L=a(494),R=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={name:a.props.name,date:a.props.date,location:a.props.location,startTime:a.props.startTime,endTime:a.props.endTime,num:a.props.meal.length,meal:a.props.meal,cost:a.props.cost,edit:!1,mealOptions:{}},a.getTableData(),a.mealChanged=!1,a.handleSubmit=a.handleSubmit.bind(Object(f.a)(Object(f.a)(a))),a.createMealInputs=a.createMealInputs.bind(Object(f.a)(Object(f.a)(a))),a.addMeal=a.addMeal.bind(Object(f.a)(Object(f.a)(a))),a.createLocationInputs=a.createLocationInputs.bind(Object(f.a)(Object(f.a)(a))),a.setMealAndCost=a.setMealAndCost.bind(Object(f.a)(Object(f.a)(a))),a.handleChangeLocation=a.handleChangeLocation.bind(Object(f.a)(Object(f.a)(a))),a.handleDelete=a.handleDelete.bind(Object(f.a)(Object(f.a)(a))),a.handleEdit=a.handleEdit.bind(Object(f.a)(Object(f.a)(a))),a.removeMeal=a.removeMeal.bind(Object(f.a)(Object(f.a)(a))),a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"getTableData",value:function(){var e=this;n.API.get("Meal_OptionCRUD","/Meal_Option").then(function(t){e.parseTableData(t.data.reverse())}).catch(function(e){console.log(e)})}},{key:"parseTableData",value:function(e){var t={};e.forEach(function(e){t[e.Name]=e.Price}),this.setState({mealOptions:t})}},{key:"addMeal",value:function(){this.mealChanged=!0;var e={};this.setState(function(t){(e=Object(A.a)({},t)).num=t.num+1;var a=t.meal;return a.push(["","0"]),e.meal=a,e})}},{key:"removeMeal",value:function(e){this.mealChanged=!0;var t=this.state.meal.indexOf(e);t>=0&&this.state.num>1&&this.setState(function(a){var n=Object(A.a)({},a);n.num=a.num-1;var s=a.cost;s-=e[1],n.cost=s;var o=a.meal;return o.splice(t,1),n.meal=o,n})}},{key:"createMealInputs",value:function(){var e=this,t=[];if(this.state.edit){var a=[];a.push(l.a.createElement("div",{key:0},l.a.createElement("h6",null,"Meal")));for(var n=function(t){a.push(l.a.createElement("div",{key:t+1,className:"row"},l.a.createElement("div",{className:e.state.num>1&&e.state.edit?"col-8 col-sm-9 col-md-10":"col-12"},l.a.createElement(P,{renderTitle:!1,value:""!==e.state.meal[t][0]?e.state.meal[t][0]:"Choose...",title:"Meal",disabled:void 0===e.state.mealOptions[e.state.meal[t][0]]&&""!==e.state.meal[t][0],update:function(a){return e.setMealAndCost(a,t)},dropdown:Array.from(new Set(Object.keys(e.state.mealOptions).concat(e.state.meal[t][0])))})),e.state.num>1&&e.state.edit?l.a.createElement("div",{className:"col-4 col-sm-3 col-md-2 pl-0 mb-3 text-right"},l.a.createElement("button",{type:"button",className:"btn btn-outline-danger","aria-label":"Close",onClick:function(a){return e.removeMeal(e.state.meal[t])}},"Remove")):""))},s=0;s<this.state.num;s++)n(s);return a}for(var o=0;o<this.state.meal.length;o++)t.push(this.state.meal[o][0]);return l.a.createElement(M,{title:"Meal",renderTitle:!0,value:t.toString(),disabled:!0})}},{key:"handleChangeLocation",value:function(e){this.setState({location:e.target.value})}},{key:"createLocationInputs",value:function(){return this.state.edit?l.a.createElement(P,{title:"Location",renderTitle:!0,value:this.state.location,update:this.handleChangeLocation,dropdown:["Seedlings","Sprouts Cafe","Community Eats","Sprouts Boxes","Events/Promotions","Other"]}):l.a.createElement(M,{title:"Location",renderTitle:!0,value:this.state.location,disabled:!0})}},{key:"setMealAndCost",value:function(e,t){var a=this.state.meal;if(a[t][0]=e.target.value,this.mealChanged=!0,this.state.mealOptions[e.target.value])a[t][1]=this.state.mealOptions[e.target.value];else if(a[t][1]=0,this.state.num>1){a.splice(t,1);var n=this.state.num-1;this.setState({num:n})}else a[t][0]="";var s=Number(0);this.state.meal.forEach(function(e){s+=Number(e[1])}),this.setState({cost:s.toString(),meal:a})}},{key:"updated",value:function(){var e=!0,t=!1;this.state.edit&&(this.state.startTime!==this.props.startTime||this.state.endTime!==this.props.endTime||this.state.location!==this.props.location||this.mealChanged)&&(t=!0);for(var a=0;a<this.state.num;a++)console.log(this.state.meal[a][0]),""===this.state.meal[a][0]&&(e=!1);return(this.state.endTime<=this.state.startTime||"Choose..."===this.state.location)&&(console.log("invalid"),e=!1),console.log(t),t&&e}},{key:"handleDelete",value:function(e){var t=this;if(window.confirm("Are you sure you want to delete this entry?")){var a="/Volunteer_Logs/object/".concat(this.state.name,"/").concat(this.state.date);n.API.del("Volunteer_LogsCRUD",a).then(function(e){alert("Entry Deleted"),t.props.history.push(t.props.backLink)}).catch(function(e){console.log(e)})}}},{key:"handleEdit",value:function(){this.state.edit&&this.props.history.push(this.props.backLink),this.setState({edit:!this.state.edit})}},{key:"handleSubmit",value:function(e){var t=this;if(this.updated()){var a={body:{name:this.state.name,date:this.state.date,startTime:this.state.startTime,endTime:this.state.endTime,location:this.state.location,meal:this.state.meal,cost:this.state.cost}};n.API.put("Volunteer_LogsCRUD","/Volunteer_Logs",a).then(function(e){alert("Entry Updated"),t.props.history.push(t.props.backLink)}).catch(function(e){console.log(e)})}else this.state.edit?"Choose..."===this.state.location?alert("Please select a location from the dropdown menu."):this.state.endTime<=this.state.startTime?alert("Please select a valid start and end time."):this.mealChanged?alert("Please select a meal from the dropdown menu."):alert('No changes made: Please make changes or click "Cancel".'):alert("No changes made: Select edit to make changes.")}},{key:"render",value:function(){var e=this,t=!0;if(this.state.num>=1){var a=this.state.meal[this.state.num-1][0];"Choose..."!==a&&"None"!==a&&""!==a&&(t=!1)}return l.a.createElement("div",null,l.a.createElement(N,{title:"Shift Details",link:function(){return e.props.history.push(e.props.backLink)}}),l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row justify-content-center"},l.a.createElement("div",{className:"col-12 my-3"},l.a.createElement(M,{value:this.state.name,title:"User",update:function(t){return e.setState({name:t.target.value})},disabled:!0}),l.a.createElement(M,{value:this.state.date,title:"Date",type:"date",update:function(t){return e.setState({date:t.target.value})},disabled:!0}),this.createLocationInputs(),l.a.createElement(M,{value:this.state.startTime,title:"Start time",type:"time",update:function(t){return e.setState({startTime:t.target.value})},disabled:!this.state.edit}),l.a.createElement(M,{value:this.state.endTime,title:"End time",type:"time",update:function(t){return e.setState({endTime:t.target.value})},disabled:!this.state.edit}),this.createMealInputs(),l.a.createElement("div",{className:"clearfix d-flex justify-content-start pb-3"},l.a.createElement("button",{type:"button",className:"btn btn-outline-success","aria-label":"Close",onClick:this.addMeal,disabled:t,hidden:!this.state.edit},"Add Meal Item")),l.a.createElement(M,{value:"".concat(this.state.cost),title:"Cost ($)",type:"number",disabled:!0}),l.a.createElement(S,{title:this.state.edit?"Cancel":"Edit",color:"btn-primary rounded-0 btn-block",onClick:this.handleEdit}),l.a.createElement(S,{title:"Save",color:"btn-secondary rounded-0 btn-block",onClick:this.handleSubmit}),l.a.createElement(S,{title:"Delete",color:"btn-danger rounded-0 btn-block",onClick:this.handleDelete})))))}}]),t}(l.a.Component),V=(Object(L.a)(R),a(116)),H=a.n(V),F=a(207),q=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).selectedRow=!1,a.apiData=[],a.state={tableData:[],edit:!1,newItem:"",newPrice:-1},a.getTableData(),a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"getTableData",value:function(){var e=Object(F.a)(H.a.mark(function e(){var t=this;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:"Meal_OptionCRUD","/Meal_Option",n.API.get("Meal_OptionCRUD","/Meal_Option").then(function(e){t.apiData=e.data.reverse(),t.parseTableData()}).catch(function(e){console.log(e)});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"parseTableData",value:function(){var e=[];this.apiData.forEach(function(t){e.push({col1:t.Name,col2:t.Price})}),this.setState({tableData:e})}},{key:"addMealOption",value:function(){var e=this.state.edit;e&&this.isValidandComplete()?this.saveMealOption(!e):e||this.setState({edit:!e})}},{key:"isValidandComplete",value:function(){var e=this.state,t=e.newItem,a=e.newPrice,n=!0;return""===t?(alert("Please enter the name of your new item."),n=!1):-1===a||""===a?(alert("Please enter the price of your new item."),n=!1):a<0&&(alert("Please enter a valid price for your new item."),n=!1),n}},{key:"saveMealOption",value:function(e){var t=this,a={body:{Name:this.state.newItem.trim(),Price:this.state.newPrice}};n.API.put("Meal_OptionCRUD","/Meal_Option",a).then(function(a){t.selectedRow=!1,t.getTableData(),t.setState({newItem:"",newPrice:-1,edit:e})}).catch(function(e){console.log(e)})}},{key:"deleteMealOption",value:function(){var e=this;if(window.confirm("Are you sure you would like to delete this option?")){var t="/Meal_Option/object/".concat(this.state.newItem);n.API.del("Meal_OptionCRUD",t).then(function(t){e.selectedRow=!1,e.getTableData(),e.setState({newItem:"",newPrice:-1,edit:!1})}).catch(function(e){console.log(e)})}}},{key:"selectRow",value:function(e){var t=this.apiData[e];this.selectedRow=!0,this.setState({newItem:t.Name,newPrice:t.Price,edit:!0})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement(N,{title:"Modify Meal Options",link:function(){return e.props.history.push("/")}}),l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row justify-content-center"},l.a.createElement("div",{className:"col-12 my-3"},l.a.createElement("div",{className:"pb-5 mb-4"},l.a.createElement(_,{col1:"Meal",col2:"Price",select:this.selectRow.bind(this),data:this.state.tableData}),l.a.createElement("div",{hidden:!this.state.edit},l.a.createElement(M,{title:"Meal Option",placeholder:"Ex. Sandwich",disabled:this.selectedRow,value:this.state.newItem,type:"string",update:function(t){return e.setState({newItem:t.target.value})}}),l.a.createElement(M,{title:"Price",placeholder:"Ex. 7",value:-1===this.state.newPrice?"":this.state.newPrice,type:"number",update:function(t){return e.setState({newPrice:t.target.value})}}),l.a.createElement("div",{hidden:!this.selectedRow},l.a.createElement(S,{title:"Update",color:"btn-primary rounded-0 btn-block",onClick:this.addMealOption.bind(this)}),l.a.createElement(S,{title:"Delete",disabled:""===this.state.newItem||""===this.state.newPrice,color:"btn-danger rounded-0 btn-block",onClick:this.deleteMealOption.bind(this)}),l.a.createElement(S,{title:"Cancel",disabled:!this.state.edit,color:"btn-secondary rounded-0 btn-block",onClick:function(){e.selectedRow=!1,e.setState({edit:!1,newItem:"",newPrice:""})}}))),l.a.createElement("div",{hidden:this.selectedRow},l.a.createElement(S,{title:this.state.edit?"Add":"Add New Meal Option",color:"btn-primary rounded-0 btn-block",onClick:this.addMealOption.bind(this)}),l.a.createElement(S,{title:"Cancel",disabled:!this.state.edit,color:"btn-secondary rounded-0 btn-block",onClick:function(){return e.setState({edit:!1,newItem:"",newPrice:""})}})))))))}}]),t}(l.a.Component),B=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(m.a)(t,[{key:"signOut",value:function(){n.Auth.signOut().then(function(){return window.location.reload()}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement(N,{title:"Options"}),l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row justify-content-center"},l.a.createElement("div",{className:"col-12 my-3"},l.a.createElement(S,{title:"Shift History",color:"btn-primary rounded-0 btn-block",onClick:function(){return e.props.history.push("/shiftHistory")}}),l.a.createElement(S,{title:"Log Hours",color:"btn-primary rounded-0 btn-block",onClick:function(){return e.props.history.push("/logHours")}}),l.a.createElement(S,{title:n.I18n.get("Sign Out"),color:"btn-danger rounded-0 btn-block",onClick:this.signOut})))))}}]),t}(l.a.Component),W=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state=a.getDefaultState(),a.removeMeal=a.removeMeal.bind(Object(f.a)(Object(f.a)(a))),a.isValid=a.isValid.bind(Object(f.a)(Object(f.a)(a))),a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;n.Auth.currentSession().then(function(t){e.setState({name:t.idToken.payload["cognito:username"]})}).catch(function(e){console.log(e)});n.API.get("Meal_OptionCRUD","/Meal_Option").then(function(t){var a={};t.data.reverse(0).forEach(function(e){a[e.Name]=e.Price}),e.setState({mealOptions:a})}).catch(function(e){console.log(e)})}},{key:"getDefaultState",value:function(){var e=new Date,t=e.getMonth()+1,a=e.getDate(),n=e.getHours(),s=e.getMinutes(),o=n,r=s+15;return s>=45&&(o++,r-=60),{name:"",date:"".concat(e.getFullYear(),"-").concat(t<10?"0":"").concat(t,"-").concat(a<10?"0":"").concat(a),startTime:"".concat(n<10?"0":"").concat(n,":").concat(s<10?"0":"").concat(s),endTime:"".concat(o<10?"0":"").concat(o,":").concat(r<10?"0":"").concat(r),location:"",meal:[["","0"]],cost:"0",numMeals:1,mealOptions:{},errorMsg:""}}},{key:"isValid",value:function(){return this.state.date?this.state.startTime&&this.state.endTime&&this.state.endTime>this.state.startTime?this.state.location&&"Choose..."!==this.state.location?!(!this.state.meal[0][0]||"Choose..."===this.state.meal[0][0])||(alert("Please select a meal option from the dropdown menu"),!1):(alert("Please select a location from the dropdown menu."),!1):(alert("Please select a valid start and end time."),!1):(alert("Please select a valid date."),!1)}},{key:"handleSubmit",value:function(){var e=this,t={body:{name:this.state.name,date:this.state.date,startTime:this.state.startTime,endTime:this.state.endTime,location:this.state.location,meal:this.state.meal,cost:Number(this.state.cost)}};this.isValid()&&n.API.post("Volunteer_LogsCRUD","/Volunteer_Logs",t).then(function(t){alert("Shift logged successfully!"),e.props.history.push("/")}).catch(function(t){e.setState({errorMsg:"Something went wrong, please try again."})})}},{key:"addMeal",value:function(){var e={};this.setState(function(t){(e=Object(A.a)({},t)).numMeals=t.numMeals+1;var a=t.meal;return a.push(["","0"]),e.meal=a,e})}},{key:"removeMeal",value:function(e){var t=this.state.meal.indexOf(e);t>=0&&this.state.numMeals>1&&this.setState(function(a){var n=Object(A.a)({},a);n.numMeals=a.numMeals-1;var s=a.cost;s-=e[1],n.cost=s;var o=a.meal;return o.splice(t,1),n.meal=o,n})}},{key:"createMealInputs",value:function(){var e=this,t=[];t.push(l.a.createElement("label",{key:0},"Meal"));for(var a=function(a){t.push(l.a.createElement("div",{key:a+1,className:"row"},l.a.createElement("div",{className:e.state.numMeals>1?"col-8 col-sm-9 col-md-10":"col-12"},l.a.createElement(P,{renderTitle:!1,value:e.state.meal[a][0],title:"Meal",update:function(t){return e.setMealAndCost(t,a)},dropdown:Object.keys(e.state.mealOptions)})),e.state.numMeals>1?l.a.createElement("div",{className:"col-4 col-sm-3 col-md-2 pl-0 mb-3 text-right"},l.a.createElement("button",{type:"button",className:"btn btn-outline-danger","aria-label":"Close",onClick:function(t){return e.removeMeal(e.state.meal[a])}},"Remove")):""))},n=0;n<this.state.numMeals;n++)a(n);return t}},{key:"setMealAndCost",value:function(e,t){var a=Object(D.a)(this.state.meal);if(a[t][0]=e.target.value,this.state.mealOptions[e.target.value])a[t][1]=this.state.mealOptions[e.target.value];else if(a[t][1]=0,this.state.numMeals>1){a.splice(t,1);var n=this.state.numMeals-1;this.setState({numMeals:n})}var s=0;this.state.meal.forEach(function(e){s+=Number(e[1])}),this.setState({cost:s.toString(),meal:a})}},{key:"render",value:function(){var e=this,t=!0,a=this.state.meal[this.state.numMeals-1][0];return"Choose..."!==a&&"None"!==a&&""!==a&&(t=!1),l.a.createElement("div",null,l.a.createElement(N,{title:"Log Hours",link:function(){return e.props.history.push("/")}}),l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row justify-content-center"},l.a.createElement("div",{className:"col-12 my-3"},l.a.createElement(M,{value:this.state.date,title:"Date",type:"date",update:function(t){return e.setState({date:t.target.value})}}),l.a.createElement(M,{value:this.state.startTime,title:"Start time",type:"time",update:function(t){return e.setState({startTime:t.target.value})}}),l.a.createElement(M,{value:this.state.endTime,title:"End time",type:"time",update:function(t){return e.setState({endTime:t.target.value})}}),l.a.createElement(P,{value:this.state.location,title:"Location",update:function(t){return e.setState({location:t.target.value})},dropdown:["Seedlings","Sprouts Cafe","Community Eats","Sprouts Boxes","Events/Promotions","Other"]}),this.createMealInputs(),l.a.createElement("div",{className:"clearfix d-flex justify-content-start pb-3"},l.a.createElement("button",{type:"button",className:"btn btn-outline-success","aria-label":"Close",onClick:this.addMeal.bind(this),disabled:t},"Add Meal Item")),l.a.createElement(M,{value:this.state.cost.toString(),title:"Cost ($)",disabled:!0}),l.a.createElement("p",null,"(Every field is required)"),l.a.createElement("p",{className:"Something went wrong, please try again."===this.state.errorMsg?"text-danger":"text-success"},this.state.errorMsg),l.a.createElement(S,{title:"Submit",color:"btn-primary rounded-0 btn-block",onClick:this.handleSubmit.bind(this),disabled:!1})))))}}]),t}(l.a.Component),G=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={tableData:[]},a.apiData=[],a.getTableData(),a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"selectRow",value:function(e){this.props.onSelectRow(this.apiData[e]),this.props.history.push("/shiftDetails")}},{key:"getTableData",value:function(){var e=this;n.Auth.currentSession().then(function(t){var a="/Volunteer_Logs/".concat(t.idToken.payload["cognito:username"]);n.API.get("Volunteer_LogsCRUD",a).then(function(t){e.apiData=t.reverse(),e.parseTableData()}).catch(function(e){console.log(e.response)})}).catch(function(e){console.log(e)})}},{key:"parseTableData",value:function(){var e=[];this.apiData.forEach(function(t){e.push({col1:t.name,col2:t.date,col3:t.location})}),this.setState({tableData:e})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement(N,{title:"Shift History",link:function(){return e.props.history.push("/")}}),l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 my-3"},l.a.createElement(_,{col1:"User",col2:"Date",col3:"Location",data:this.state.tableData,select:this.selectRow.bind(this)})))))}}]),t}(l.a.Component),J=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).handleSelectRow=function(e){a.setState({name:e.name,date:e.date,location:e.location,startTime:e.startTime,endTime:e.endTime,meal:e.meal,cost:e.cost})},a.state={name:"",date:"",location:"",startTime:"",endTIme:"",meal:"",cost:""},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return"volunteer"===this.props.userGroup?l.a.createElement(k.a,null,l.a.createElement("div",null,l.a.createElement(O.a,{exact:!0,path:"/",component:B}),l.a.createElement(O.a,{path:"/logHours",component:W}),l.a.createElement(O.a,{path:"/shiftHistory",render:function(t){return l.a.createElement(G,Object.assign({},t,{onSelectRow:e.handleSelectRow}))}}),l.a.createElement(O.a,{path:"/shiftDetails",render:function(t){return l.a.createElement(R,Object.assign({},t,{name:e.state.name,date:e.state.date,location:e.state.location,startTime:e.state.startTime,endTime:e.state.endTime,meal:e.state.meal,cost:e.state.cost,backLink:"/shiftHistory"}))}}))):"sprouts-admin"===this.props.userGroup?l.a.createElement(k.a,null,l.a.createElement("div",null,l.a.createElement(O.a,{exact:!0,path:"/",component:C}),l.a.createElement(O.a,{path:"/logHours",component:W}),l.a.createElement(O.a,{path:"/modifyMeals",component:q}),l.a.createElement(O.a,{path:"/viewLogs",render:function(t){return l.a.createElement(U,Object.assign({},t,{onSelectRow:e.handleSelectRow}))}}),l.a.createElement(O.a,{path:"/shiftDetails",render:function(t){return l.a.createElement(R,Object.assign({},t,{name:e.state.name,date:e.state.date,location:e.state.location,startTime:e.state.startTime,endTime:e.state.endTime,meal:e.state.meal,cost:e.state.cost,backLink:"/viewLogs"}))}}))):void 0}}]),t}(r.Component),$=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={userGroup:"volunteer"},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;n.Auth.currentSession().then(function(t){t.accessToken.payload["cognito:groups"]&&e.setState({userGroup:t.accessToken.payload["cognito:groups"][0]})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(J,{userGroup:this.state.userGroup}))}}]),t}(r.Component),z=Object(b.withAuthenticator)($,!1,[l.a.createElement(w,null),l.a.createElement(b.ConfirmSignIn,null),l.a.createElement(y,null),l.a.createElement(E,null),l.a.createElement(b.RequireNewPassword,null)]),K=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Q(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}a(487);s.a.configure(o),c.a.render(l.a.createElement(z,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");K?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Q(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):Q(e)})}}()},82:function(e,t){}},[[209,2,1]]]);
//# sourceMappingURL=main.e3656567.chunk.js.map